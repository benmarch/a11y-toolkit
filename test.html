<!DOCTYPE html>
<html>
<head>
  <title>Test Page</title>

  <script src="./dist/main.js"></script>
</head>

<body>
  <h1>Test Page</h1>
  <section>
    <header>
      <h2>Focus Trap</h2>
    </header>    

    <button type="button" onclick="focusTrapActivate()">Activate</button>

    <div id="trap" style="border: 1px solid black; padding: 10px;">
      <button type="button">Button</button>
      <a href="test.html">Link</a>
      <input type="text" />
      <span>Text</span>
      <span contenteditable>Editable</span>
      <button type="button" onclick="focusTrapDeactivate()">Deactivate</button>
    </div>

    <script>
      const trapped = document.getElementById('trap')
      const trap = new a11yToolkit.FocusTrap(trapped)

      function focusTrapActivate() {
        trap.activate()
      }

      function focusTrapDeactivate() {
        trap.deactivate()
      }
    </script>
  </section>



  <section>
    <header>
      <h2>Arrow Key Nav</h2>
    </header>
  
    <button type="button" onclick="arrowNavActivate()">Activate</button>
  
    <div id="keyContainer" style="border: 1px solid black; padding: 10px;">
      <button type="button">Button</button>
      <a href="test.html">Link</a>
      <input type="text" />
      <span>Text</span>
      <span contenteditable>Editable</span>
      <button type="button" onclick="arrowNavDeactivate()">Deactivate</button>
    </div>
  
    <script>
      const keyContainer = document.getElementById('keyContainer')
      const arrowNavElements = new a11yToolkit.ElementList(a11yToolkit.selectors.getInteractiveChildren(keyContainer))
      const arrowNav = new a11yToolkit.ArrowKeyNavigator(keyContainer, arrowNavElements, { horizontal: true, homeEnd: true, loop: true })

      function arrowNavActivate() {
        arrowNav.activate()
      }

      function arrowNavDeactivate() {
        arrowNav.deactivate()
      }
    </script>
  </section>


  <section>
    <header>
      <h2>Tab Stop Portal</h2>
    </header>

    <button type="button" onclick="tabStopPortalAfterActivate()">Activate After</button>
    <button type="button" onclick="tabStopPortalBeforeActivate()">Activate Before</button>
    <button type="button" onclick="focusPortal()">Focus Portal</button>

    <div id="tabStopElements">
      <button type="button">Previous</button>
      <button type="button" id="tabStopAfter">After</button>
      [portal will virtually be here]
      <button type="button" id="tabStopBefore">Before</button>
      <button type="button">Next</button>
    </div>

    <div id="tabStopPortal" style="border: 1px solid black; padding: 10px;">
      <button type="button">Button</button>
      <a href="test.html">Link</a>
      <input type="text" />
      <span>Text</span>
      <span contenteditable>Editable</span>
    </div>
  
    <script>
      const portalContainer = document.getElementById('tabStopPortal')
      const afterButton = document.getElementById('tabStopAfter')
      const beforeButton = document.getElementById('tabStopBefore')
      const beforePortal = new a11yToolkit.TabStopPortal(portalContainer, { before: beforeButton })
      const afterPortal = new a11yToolkit.TabStopPortal(portalContainer, { after: afterButton })

      function tabStopPortalAfterActivate() {
        afterPortal.activate()
      }

      function tabStopPortalAfterDeactivate() {
        afterPortal.deactivate()
      }

      function tabStopPortalBeforeActivate() {
        beforePortal.activate()
      }

      function tabStopPortalBeforeDeactivate() {
        beforePortal.deactivate()
      }

      function focusPortal() {
        beforePortal.focus()
        afterPortal.focus()
      }
    </script>
  </section>
</body>
</html>